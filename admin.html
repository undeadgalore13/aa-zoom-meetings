<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Protected Access</title>

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, Helvetica, sans-serif;
        background: #0f0f0f;
        color: #ffffff;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
    }

    .container {
        text-align: center;
        max-width: 400px;
        width: 90%;
        padding: 30px;
        border-radius: 10px;
        background: #1a1a1a;
        box-shadow: 0 0 15px rgba(0,0,0,0.6);
    }

    h1 {
        margin-bottom: 20px;
        font-size: 1.6em;
    }

    .pin-input {
        display: flex;
        justify-content: space-between;
        margin: 20px 0;
    }

    .pin-input input {
        width: 40px;
        height: 50px;
        font-size: 2em;
        text-align: center;
        border-radius: 6px;
        border: 2px solid #555;
        background: #111;
        color: #fff;
        outline: none;
        -webkit-text-security: disc; /* hide digits */
        text-security: disc;
        transition: border 0.2s;
    }

    .pin-input.shake {
        animation: shake 0.4s;
    }

    @keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-6px); }
        50% { transform: translateX(6px); }
        75% { transform: translateX(-6px); }
        100% { transform: translateX(0); }
    }

    .message {
        color: #ff5c5c;
        font-size: 0.95em;
        margin-top: 10px;
    }

    .links {
        display: none;
        margin-top: 20px;
    }

    .links button {
        padding: 14px 20px;
        font-size: 1em;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        background: #28a745;
        color: #fff;
        margin: 10px 0;
        width: 100%;
    }

    .links button:hover {
        background: #1e7e34;
    }
</style>
</head>

<body>
<div class="container">
    <h1>Protected Access</h1>

    <div id="password-area">
        <div class="pin-input" id="pinContainer">
            <input type="tel" inputmode="numeric" maxlength="1" autocomplete="off" />
            <input type="tel" inputmode="numeric" maxlength="1" autocomplete="off" />
            <input type="tel" inputmode="numeric" maxlength="1" autocomplete="off" />
            <input type="tel" inputmode="numeric" maxlength="1" autocomplete="off" />
            <input type="tel" inputmode="numeric" maxlength="1" autocomplete="off" />
            <input type="tel" inputmode="numeric" maxlength="1" autocomplete="off" />
        </div>
        <div class="message" id="message"></div>
    </div>

    <div class="links" id="links">
        <button id="trackerBtn">Meeting Tracker</button>
        <button id="timeslotBtn">24 Hour Timeslot</button>
    </div>
</div>

<script>
/* ==========================
   OBFUSCATION HELPERS
========================== */
const decode = (str) => atob(str);
const reverse = (str) => str.split("").reverse().join("");

// Obfuscated password (real password: 122625)
const pw = "NTI2MjIx"; // base64 of reversed password

// Updated Obfuscated Google Sheet URLs
const trackerURL = "aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2UvZTJQQUNYLTF2WUlaQUE0c05OQnJLXzFiOEZYaWRwaE9SM251V1FNMHhCTDMxM2RUalcxcHV1aGg5clhYaHphaVlNYkNDc3hMZmFyNVJHRjdXaUVxUjA/cHVibWx0aD9naWQ9MCZzaW5nbGU9dHJ1ZQ==";
const timeslotURL = "aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2UvZTJQQUNYLTF2WUlaQUE0c05OQnJLXzFiOEZYaWRwaE9SM251V1FNMHhCTDMxM2RUalcxcHV1aGg5clhYaHphaVlNYkNDc3hMZmFyNVJHRjdXaUVxUjA/cHVibWx0aD9naWQ9MTEzMzQ1MDY1NiZzaW5nbGU9dHJ1ZQ==";

const correctPassword = reverse(decode(pw));
let attempts = 0;

const pinContainer = document.getElementById('pinContainer');
const inputs = Array.from(pinContainer.querySelectorAll('input'));
const message = document.getElementById('message');

function getInputValue() {
    return inputs.map(i => i.value).join('');
}

function clearInput() {
    inputs.forEach(i => i.value = '');
    inputs[0].focus();
}

// Auto-focus & auto-advance logic
inputs.forEach((input, idx) => {
    input.addEventListener('input', () => {
        input.value = input.value.replace(/\D/g,''); // numbers only
        if(input.value && idx < inputs.length - 1) {
            inputs[idx+1].focus();
        }
        if(getInputValue().length === 6) {
            checkPassword();
        }
    });

    input.addEventListener('keydown', e => {
        if(e.key === "Backspace" && !input.value && idx > 0){
            inputs[idx-1].focus();
        }
    });
});

function checkPassword() {
    const val = getInputValue();
    if(val === correctPassword){
        document.getElementById('password-area').style.display = 'none';
        document.getElementById('links').style.display = 'block';

        document.getElementById('trackerBtn').onclick = () => { window.location.href = decode(trackerURL); };
        document.getElementById('timeslotBtn').onclick = () => { window.location.href = decode(timeslotURL); };

        return;
    }

    attempts++;
    pinContainer.classList.add('shake');
    setTimeout(() => pinContainer.classList.remove('shake'), 400);

    if(attempts === 1){
        message.textContent = "incorrect response; two more attempts";
    } else if(attempts === 2){
        message.textContent = "incorrect response; last attempt";
    } else {
        message.textContent = "incorrect response entered. maximum attempts reached, returning to landing page";
        setTimeout(() => {
            window.location.href = "https://undeadgalore13.github.io/aa-zoom-meetings/";
        }, 2000);
    }

    clearInput();
}

// Auto-focus first input on load
window.onload = () => { inputs[0].focus(); };

</script>
</body>
</html>
